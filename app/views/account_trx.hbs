<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<html>
<div class="container">



<body>

<div class="row mt-4">

<h2>Welcome </h2>


<table class="table table-hover tablesorter" id="myTable">
              <thead class="thead-light">
                <tr>
                    
                  <th scope="col">Account Name</th>
									<th scope="col">Account Type</th>
									<th scope="col">Amount</th>
                  <th scope="col">Details</th>
                  <th scope="col">Balance</th>
                  <th scope="col">Action</th>

                	<th scope="col"></th>          
                </tr>
              </thead>
              <tbody class="info table-hover">

  {{#each Accounts}}
  	<tr class="tableRow" data-id="{{this.account_id}}">

			<td> {{this.account_desc}}  </td>
			<td> {{this.account_type}}  </td>
      <td> <input type="text" id="amt" placeholder="trx_amt"> </td>
      <td> <input type="text" id="details" placeholder="trx_details"> </td>
      <td> {{this.account_balance}} </td>     
      <td> <button id="deposit" data-id="{{this.account_id}}" user_id={{this.user_id}} balance={{this.account_balance}}  class=" float-right ">Deposit</button> </td>
      <td> <button id="withdrawal" data-id="{{this.account_id}}" user_id={{this.user_id}} balance={{this.account_balance}}  class=" float-right ">Withdraw</button> </td>
  	</tr>
  {{/each}}
              

              
              </tbody>
            </table>
         
</div>



</body>
</div>

</html>

<script>

$(document).ready(function(){

$("#deposit").on("click",function() {
alert("hello world")
jQuery.ajax({
          url: "/deposit",
          type: "POST",
          data: {account_id: $(this).attr("data-id"),  
          trx_amt:parseFloat($("#amt").val()), 
          trx_type:"Deposit", 
          trx_details:$("#details").val(), 
          beg_bal:parseFloat($(this).attr("balance")), 
          end_bal:(parseFloat($(this).attr("balance"))+parseFloat($("#amt").val())),
          user_id:$(this).attr("user_id") },
          dataType: "json",
          beforeSend: function(x) {
            if (x && x.overrideMimeType) {
              x.overrideMimeType("application/j-son;charset=UTF-8");
            }
          },
          success: function(result) {
 	        console.log("Ajax Object")
          console.log(result)
         location.reload()
        
          }
});      



})




$("#withdrawal").click(function() {

jQuery.ajax({
          url: "/withdrawal",
          type: "POST",
          data: {account_id: $(this).attr("data-id"),  
          trx_amt:parseFloat($("#amt").val())*-1, 
          trx_type:"Withdrawal", 
          trx_details:$("#details").val(), 
          beg_bal:parseFloat($(this).attr("balance")), 
          end_bal:(parseFloat($(this).attr("balance"))-parseFloat($("#amt").val())),
          user_id:$(this).attr("user_id") },
          dataType: "json",
          beforeSend: function(x) {
            if (x && x.overrideMimeType) {
              x.overrideMimeType("application/j-son;charset=UTF-8");
            }
          },
          success: function(result) {
 	        console.log("Ajax Object")
          console.log(result)
         location.reload()
        
          }
});      



})


})


</script>